<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
-->

<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../vaadin-themable-mixin/vaadin-themable-mixin.html">
<link rel="import" href="vaadin-item-mixin.html">

<dom-module id="vaadin-item-default-theme">
  <template>
    <style>
      :host {
        padding: 4px;
        border: 2px solid transparent;
        opacity: 0.7;
        white-space: nowrap;
        text-overflow: ellipsis;
      }

      [part="button"] {
        display: flex;
        justify-content: center;
      }

      [part="close-button"] {
        position: absolute;
        top: 0;
        right: 0;

        border: solid 1px grey;
        border-radius: 50%;
        opacity: 0.6;
        width: 12px;
        height: 12px;
        line-height: 10px;
        font-size: 10px;
        display: flex;
        justify-content: center;
      }

      [part="close-button"]::before {
        content: "x";
      }

      :host([focused]) {
        border: 2px solid #03a9f4;
      }

      :host([active]) {
        background: #03a9f41f;
      }

      :host([selected]) {
        background: #03a9f44f;
      }

      :host([disabled]) {
        opacity: 0.3;
      }

      :host(:hover) {
        opacity: 1;
      }
    </style>
  </template>
</dom-module>

<dom-module id="vaadin-item">
  <template>
    <style>
      :host {
        display: block;
        position: relative;
        outline: none;
      }

      [part="button"] {
        width: 100%;
        height: 100%;
        display: flex;
      }

      :host([hidden]) {
        display: none;
      }
    </style>
    <vaadin-nav-item>
      <div id="button" type="button" part="button">
        <slot name="prefix"></slot>
        <slot name="icon"></slot>
        <slot></slot>
        <slot name="budge"></slot>
        <div part="close-button" on-tap="_close" hidden$="[[closeEnabled]]"></div>
        <slot name="suffix"></slot>
      </div>
    </vaadin-nav-item>
  </template>
  <script>
    if (!Polymer.Element) {
      throw new Error(`Unexpected Polymer version ${Polymer.version} is used, expected v2.0.0 or later.`);
    }

    {
      /**
       * `<vaadin-item>` is a Polymer 2 element providing layout for items in tabs and menus
       *
       * @memberof Vaadin
       * @mixes Vaadin.NavItemMixin
       * @mixes Vaadin.ThemableMixin
       */
      class ItemElement extends Vaadin.ThemableMixin(Polymer.Element) {
        static get is() {
          return 'vaadin-item';
        }

        static get properties() {
          return {
            closeEnabled: Boolean
          };
        }

        _close() {
          this.dispatchEvent(new CustomEvent('close', {bubbles: true, composed: true}));
        }
      }

      customElements.define(ItemElement.is, ItemElement);

      /**
       * @namespace Vaadin
       */
      window.Vaadin = window.Vaadin || {};
      Vaadin.ItemElement = ItemElement;
    }
  </script>
</dom-module>
